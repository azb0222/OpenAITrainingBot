{"docstore/metadata": {"69b7a129-ef7f-421d-9af4-87ed919019b3": {"doc_hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "4faba8df-adb9-4443-8a87-cc2ca4519c66": {"doc_hash": "c675fe82e4eff8c0a0408fa143df9f51156b45b3baf262278901bc3a854f5bf2", "ref_doc_id": "69b7a129-ef7f-421d-9af4-87ed919019b3"}, "235d85c8-bdaf-49d3-a00b-267776af2e5c": {"doc_hash": "e8723617a6e66b66a87c3a962edbb40a464f34229d8dfd7757458deeb1361ae2", "ref_doc_id": "69b7a129-ef7f-421d-9af4-87ed919019b3"}, "96744b0a-7a58-4376-9e55-5649f5e8dbbf": {"doc_hash": "d1dd29c4bb53ccf08d0e1dbd8e80faafc1ad79638b235fcd47599f7b64f75072", "ref_doc_id": "69b7a129-ef7f-421d-9af4-87ed919019b3"}, "b8930216-5fbb-4d0f-9ec2-9d4b141f47c1": {"doc_hash": "01c0208deff1c741dc6b798e5049f0e727a2c3af04691505523af97d52bbc4b5", "ref_doc_id": "69b7a129-ef7f-421d-9af4-87ed919019b3"}, "96dc5caf-6a46-4584-8478-b921f769f2dd": {"doc_hash": "6952532791ea67ff1ab912a68b76cbd7f1b52fe240dd52a001e678a09f57a93f", "ref_doc_id": "69b7a129-ef7f-421d-9af4-87ed919019b3"}, "c1c58318-8c85-4977-8b42-898d9f1c3c31": {"doc_hash": "bf0dce122bf47b7f707c8401c08fb0db35003c37c93acbc4ca38d3d6d9cea46b", "ref_doc_id": "69b7a129-ef7f-421d-9af4-87ed919019b3"}}, "docstore/data": {"4faba8df-adb9-4443-8a87-cc2ca4519c66": {"__data__": {"id_": "4faba8df-adb9-4443-8a87-cc2ca4519c66", "embedding": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69b7a129-ef7f-421d-9af4-87ed919019b3", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "3": {"node_id": "235d85c8-bdaf-49d3-a00b-267776af2e5c", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "e8723617a6e66b66a87c3a962edbb40a464f34229d8dfd7757458deeb1361ae2"}}, "hash": "c675fe82e4eff8c0a0408fa143df9f51156b45b3baf262278901bc3a854f5bf2", "text": "Encrypting Data With The Notecard\n\nThe Notecard was built with security in mind. With a factory-installed ECC P-384 certificate provisioned at chip manufacture, and \"off-the-internet\" communication between the Notecard and Notehub.io cloud service, you can be sure that your data is safe. For certain kinds of applications, however, you may wish to have an additional layer of security between your host application and your cloud app. To enable this extra layer of security, the Notecard supports end-to-end encryption of your data. Using an AES-256 symmetric algorithm based on an RSA public key you specify, the Notecard can encrypt every Note added by your host. Encrypted Notes are then synched to Notehub, where they can be routed to your cloud application for decryption using your RSA private key.\n\nNotecard Encryption Overview\nWarning\n\nv1.5.5 and later required!\n\nThe capabilities described below are only supported on Notecard firmware version 1.5.5 and later. Please upgrade before proceeding if necessary.\n\nAt a high-level, you'll need to take the following steps to leverage end-to-end encryption with the Notecard and Notehub.io:\n\nGenerate an RSA key pair.\nAdd the contents of your RSA public key to an environment variable in your Notehub project. We recommend adding your key to a project-level variable to ensure it can be used by all of the devices in your solution.\nWhen adding Notes to the Notecard, use the key argument with each note.add request and provide the name of the environment variable added to Notehub in the previous step.\nCreate a Notehub Route to send your encrypted data to your cloud application.\nUpon receipt of your encrypted data, use your RSA private key to decrypt it.\n\nThe remainder of this guide will provide step-by-step instructions for", "start_char_idx": 0, "end_char_idx": 1782, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "235d85c8-bdaf-49d3-a00b-267776af2e5c": {"__data__": {"id_": "235d85c8-bdaf-49d3-a00b-267776af2e5c", "embedding": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69b7a129-ef7f-421d-9af4-87ed919019b3", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "2": {"node_id": "4faba8df-adb9-4443-8a87-cc2ca4519c66", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "c675fe82e4eff8c0a0408fa143df9f51156b45b3baf262278901bc3a854f5bf2"}, "3": {"node_id": "96744b0a-7a58-4376-9e55-5649f5e8dbbf", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "d1dd29c4bb53ccf08d0e1dbd8e80faafc1ad79638b235fcd47599f7b64f75072"}}, "hash": "e8723617a6e66b66a87c3a962edbb40a464f34229d8dfd7757458deeb1361ae2", "text": "remainder of this guide will provide step-by-step instructions for using the encryption capabilities of the Notecard, along with examples of decrypting the data using OpenSSL and Node.js.\n\nNotecard Encryption Walkthrough\nCreate an RSA Key Pair\n\nFirst, create an RSA public and private key pair to use for your application. For example, to generate a 4096-bit RSA key pair using openssl:\n\nCOPY\nopenssl genrsa -out keys/private.pem 4096\nopenssl rsa -in keys/private.pem -pubout -out keys/public.pem\n\nThe commands above will output two files with .pem extensions, one with your private key, and one with the public key.\n\nAdd Your Public Key To Notehub as an Environment Variable\n\nOnce you have a key pair, you'll need to add the public key to your Notehub project so that the Notecard can encrypt Note bodies on your behalf.\n\nNavigate to your Notehub project and click the \"Environment\" menu item in the left navigation.\n\nThen, create a new environment variable with any name you wish. You'll use this name below to tell the Notecard which key to use to encrypt your data. Copy the complete contents of your public key file into the value field for this variable.\n\nAdd Notes with the key argument\n\nAfter the public key environment variable is set, all that's left is to include the key argument when sending note.add requests. Use the name you specified for the variable in Notehub and the Notecard will encrypt the Note body before it saves it to a Notefile.\n\nJSON\nC/C++\nPython\nCOPY\n{\n  \"req\": \"note.add\",\n  \"file\": \"sensors.qo\",\n  \"key\": \"encryption_key\",\n  \"body\":\n    {\n      \"temp\":", "start_char_idx": 1725, "end_char_idx": 3309, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "96744b0a-7a58-4376-9e55-5649f5e8dbbf": {"__data__": {"id_": "96744b0a-7a58-4376-9e55-5649f5e8dbbf", "embedding": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69b7a129-ef7f-421d-9af4-87ed919019b3", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "2": {"node_id": "235d85c8-bdaf-49d3-a00b-267776af2e5c", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "e8723617a6e66b66a87c3a962edbb40a464f34229d8dfd7757458deeb1361ae2"}, "3": {"node_id": "b8930216-5fbb-4d0f-9ec2-9d4b141f47c1", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "01c0208deff1c741dc6b798e5049f0e727a2c3af04691505523af97d52bbc4b5"}}, "hash": "d1dd29c4bb53ccf08d0e1dbd8e80faafc1ad79638b235fcd47599f7b64f75072", "text": " \"body\":\n    {\n      \"temp\": 72.22,\n      \"humidity\": 21.3,\n      \"pressure\": 1.002,\n      \"sound_level\": 68.9,\n      \"heart_rate\": 65,\n    }\n}\nNote\n\nHow exactly does the Notecard encrypt my data?\n\nIt's important to understand the exact process the Notecard uses to encrypt your Note body because you'll need to do the reverse to decrypt it once received from Notehub.\n\nThe Notecard generates a random 64 bit AES encryption key.\nThe clear text Note body you specified in the note.add request is encrypted with the AES key and base64-encoded for transport.\nThe random AES key is then encrypted with your RSA public key and base64-encoded for transport.\n\nOnce encryption is complete, the original Note body is replaced with a new body that contains the original encrypted body and the encrypted AES key.\n\nRoute Your Data\n\nAfter the next Notecard sync with Notehub, your Notes will appear with encrypted data.\n\nCOPY\n{\n    \"alg\": \"rsa+aes-256-cbc\",\n    \"data\":", "start_char_idx": 3351, "end_char_idx": 4307, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "b8930216-5fbb-4d0f-9ec2-9d4b141f47c1": {"__data__": {"id_": "b8930216-5fbb-4d0f-9ec2-9d4b141f47c1", "embedding": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69b7a129-ef7f-421d-9af4-87ed919019b3", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "2": {"node_id": "96744b0a-7a58-4376-9e55-5649f5e8dbbf", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "d1dd29c4bb53ccf08d0e1dbd8e80faafc1ad79638b235fcd47599f7b64f75072"}, "3": {"node_id": "96dc5caf-6a46-4584-8478-b921f769f2dd", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "6952532791ea67ff1ab912a68b76cbd7f1b52fe240dd52a001e678a09f57a93f"}}, "hash": "01c0208deff1c741dc6b798e5049f0e727a2c3af04691505523af97d52bbc4b5", "text": "\"rsa+aes-256-cbc\",\n    \"data\": \"FIo2VF1lj052pjKQ6L0fRrlLWAdi1jdN12ARXghDtbAscsgbgXFiYVdXnECqe0zI6+c7fIwh7B3N52BmLyo4LQv+pBDnUV9sPoPgvj81jdm9j0Ac+AlCibNn3wooRjIIEJIePSJbUYUDkHq8cvNoHuxcgSJzTZHhnJ2zz4nmNYbOeIG4w+sCFcrx3HTrHc0JIEd8ySFZWCdJV536Ej3KTavYjIeZWByknx9ultZ42vR5fvJQyQscG30NipHvmY+i\",\n    \"env\": \"encryption_key\",\n    \"key\":", "start_char_idx": 4299, "end_char_idx": 4629, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "96dc5caf-6a46-4584-8478-b921f769f2dd": {"__data__": {"id_": "96dc5caf-6a46-4584-8478-b921f769f2dd", "embedding": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69b7a129-ef7f-421d-9af4-87ed919019b3", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "2": {"node_id": "b8930216-5fbb-4d0f-9ec2-9d4b141f47c1", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "01c0208deff1c741dc6b798e5049f0e727a2c3af04691505523af97d52bbc4b5"}, "3": {"node_id": "c1c58318-8c85-4977-8b42-898d9f1c3c31", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "bf0dce122bf47b7f707c8401c08fb0db35003c37c93acbc4ca38d3d6d9cea46b"}}, "hash": "6952532791ea67ff1ab912a68b76cbd7f1b52fe240dd52a001e678a09f57a93f", "text": "   \"env\": \"encryption_key\",\n    \"key\": \"HYmDRAQ3hZBpmSnwimASF1sPlXsJy0tYiam9pc5aaZRglVWuQnpDJeNpHerQuKWtKsRyzaFSGpeRyU8U0EIffah1azcA1ZxmVC+1YJOaBUhwKczdNI0jWLARZu767AB27F6wD0NLXk9UY6wtHRf7+Yt5T+jUrrEKW7abogcV9V7GUuds6wSHiIGob7Md2zIv2hxLLLErSmwYa4rLU69BkkFH9ffO0LqkjxYOhp5KQ5yDuU8QfvRZ7Lp/iTxoz7CkQoeCnLEfCEZnNUSZaLlhmoCjClvc+kcVd6M3S682j6LG8PDYVmJUVE7u1qd0khmPHLRoGmr9HpNL6N3KwcjpLQ==\"\n}\n\nFrom Notehub, you can route your encrypted data to your cloud app of choice. Don't forget to include both the data and key fields in any transformations you might make prior to routing. You'll need both to properly decrypt the data.\n\nDecrypt Your data\n\nAfter you've safely received the encrypted data and key from Notehub you can decrypt it with the following steps:\n\nDecode the base64 encrypted AES key and decrypt it using your RSA Private key.\nDecode the base64 encrypted data and decrypt it with the decrypted AES key from the last step.\nBash\nNodejs\nCOPY\n### Decrypt with OpenSSL ###\n\n# Decode the base64-encoded AES", "start_char_idx": 4626, "end_char_idx": 5635, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "c1c58318-8c85-4977-8b42-898d9f1c3c31": {"__data__": {"id_": "c1c58318-8c85-4977-8b42-898d9f1c3c31", "embedding": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69b7a129-ef7f-421d-9af4-87ed919019b3", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "9a3cb19b137ce9ca7aa8d9935e1a28a5b468293bd65adcfbabd84d9ce7bf4faf"}, "2": {"node_id": "96dc5caf-6a46-4584-8478-b921f769f2dd", "node_type": null, "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}, "hash": "6952532791ea67ff1ab912a68b76cbd7f1b52fe240dd52a001e678a09f57a93f"}}, "hash": "bf0dce122bf47b7f707c8401c08fb0db35003c37c93acbc4ca38d3d6d9cea46b", "text": "Decrypt with OpenSSL ###\n\n# Decode the base64-encoded AES key\nopenssl base64 -A -d -in transport/ciphertext_key_out.b64 -out temp/ciphertext_dec_key.bin\n\n# Decrypt the AES key using the RSA private key\nopenssl rsautl -decrypt -inkey keys/private.pem -in temp/ciphertext_dec_key.bin -out temp/dec_key.bin\n\n# Decode the base64-encoded encrypted data\nopenssl base64 -A -d -in transport/ciphertext_data_out.b64 -out temp/ciphertext_dec_data.bin\n\n# Decrypt the encrypted data using the decrypted AES key\nKEYHEX=$(xxd -c 256 -p temp/dec_key.bin) && openssl enc -d -aes-256-cbc -iv 0 -K $KEYHEX -in temp/ciphertext_dec_data.bin -out output/cleartext_data.bin\nAdditional Resources\nnote.add API Reference\nNotehub Route Tutorials\nCan we improve this page? Send us feedback", "start_char_idx": 5608, "end_char_idx": 6370, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}}, "docstore/ref_doc_info": {"69b7a129-ef7f-421d-9af4-87ed919019b3": {"node_ids": ["4faba8df-adb9-4443-8a87-cc2ca4519c66", "235d85c8-bdaf-49d3-a00b-267776af2e5c", "96744b0a-7a58-4376-9e55-5649f5e8dbbf", "b8930216-5fbb-4d0f-9ec2-9d4b141f47c1", "96dc5caf-6a46-4584-8478-b921f769f2dd", "c1c58318-8c85-4977-8b42-898d9f1c3c31"], "metadata": {"title": "", "category": "Encrypting Data With The Notecard", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/encrypting-data-with-the-notecard/"}}}}