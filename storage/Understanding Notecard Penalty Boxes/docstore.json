{"docstore/metadata": {"fb9abc03-b2dd-48e1-87de-313b4d7221ba": {"doc_hash": "c9b4ff9e4391075477d3a9d2eae905310f68d11c4296ac7d6ac70dbd8b5e17ec"}, "bf1d6e89-b321-4c55-8a80-0dac576d56cb": {"doc_hash": "44a31b371cb87c8253481690e405690924d0cc2793e0246b85f5777f173b8e83", "ref_doc_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba"}, "57e2324c-65f1-4968-ba57-daf99c64d2a7": {"doc_hash": "84e450d9975bf458462474db28faeb44a7818a2106bb5a8f4578c8b50de69e62", "ref_doc_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba"}, "2a2bd476-0da7-4159-9381-906870c9941e": {"doc_hash": "e777843e817fa7b2507490bff16a47d3f36d2949eeb73cf4b9be4b7714aad5d4", "ref_doc_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba"}, "0e1ee83e-159c-4b25-b5ca-d75f82ecf41d": {"doc_hash": "f3f13c23b0ce0c9f567c195eda4b2a86b947d27b16900ac181075aa7e0aee723", "ref_doc_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba"}, "925660a3-392e-4154-8028-c549402a16fc": {"doc_hash": "b05b243b2edef32d93e2f3d22b3c188ce41ed330c29edbf63726b9aceb3b41c8", "ref_doc_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba"}}, "docstore/data": {"bf1d6e89-b321-4c55-8a80-0dac576d56cb": {"__data__": {"id_": "bf1d6e89-b321-4c55-8a80-0dac576d56cb", "embedding": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "c9b4ff9e4391075477d3a9d2eae905310f68d11c4296ac7d6ac70dbd8b5e17ec"}, "3": {"node_id": "57e2324c-65f1-4968-ba57-daf99c64d2a7", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "84e450d9975bf458462474db28faeb44a7818a2106bb5a8f4578c8b50de69e62"}}, "hash": "44a31b371cb87c8253481690e405690924d0cc2793e0246b85f5777f173b8e83", "text": "Understanding the Notecard Penalty Boxes\n\nIf you have a Notecard that is no longer communicating with Notehub or is repeatedly unable to connect to a cellular network, the Notecard may have been placed in a figurative \"penalty box\".\n\nA penalty box is a state in which the Notecard is isolated and not allowed to even attempt a connection to a cellular network. Repeating a network connection failure multiple times can unnecessarily drain an attached battery. Therefore, the penalty box is set up to preserve battery life while also occasionally \"opening up\" and allowing the Notecard to attempt a new connection at certain intervals.\n\nIf you have enabled the capture of trace logs on a Notecard, you may see log events that refer to the penalty box, such as:\n\nCOPY\n{\"text\":\"penalty: entering penalty box: connect delayed (89 min remaining): can't open session to notehub: socket open PPP: ppp connection timeout? {service}{extended-service-failure}\"}\n\n{\"text\":\"penalty: removed from penalty box: penalty period expired\"}\n\nIn this guide we will look at the reasons why a Notecard may be placed in a penalty box and under which conditions a Notecard may be removed from a penalty box.\n\nNote\n\nThe failure of a Notecard to sync with Notehub does not necessarily mean it is in a penalty box. It could also be due the use of an invalid ProductUID or incorrect Notehub host name. These can be diagnosed in the response to a hub.sync.status command. For example:\n\nCOPY\n{\"req\":\"hub.sync.status\"}\n\n{\"alert\":true,\"status\":\"connect delayed (60 min remaining): can't open session to discovery service: socket: cannot find host: blah.notefile.net {service}{host-unreachable}", "start_char_idx": 0, "end_char_idx": 1661, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "57e2324c-65f1-4968-ba57-daf99c64d2a7": {"__data__": {"id_": "57e2324c-65f1-4968-ba57-daf99c64d2a7", "embedding": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "c9b4ff9e4391075477d3a9d2eae905310f68d11c4296ac7d6ac70dbd8b5e17ec"}, "2": {"node_id": "bf1d6e89-b321-4c55-8a80-0dac576d56cb", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "44a31b371cb87c8253481690e405690924d0cc2793e0246b85f5777f173b8e83"}, "3": {"node_id": "2a2bd476-0da7-4159-9381-906870c9941e", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "e777843e817fa7b2507490bff16a47d3f36d2949eeb73cf4b9be4b7714aad5d4"}}, "hash": "84e450d9975bf458462474db28faeb44a7818a2106bb5a8f4578c8b50de69e62", "text": "find host: blah.notefile.net {service}{host-unreachable} {service}{extended-service-failure}\",\"time\":1638397092,\"completed\":24}\nTypes of Penalty Boxes\n\nThere are four types of penalty boxes that a Notecard may enter after repeated failures:\n\nInsufficient Power Supply\nNetwork Registration Failure\nInability to Connect to Notehub\nInability to Acquire GPS Satellite Fix\n\nEach penalty box is explained below including commands on how to manually remove a Notecard from a penalty box (when available).\n\nInsufficient Power Supply\n\nIf the Notecard reboots due to insufficient current supply while the modem is trying to register the Notecard on a cellular network, it will enter a penalty box. If the reboot is due to a card.restart, card.restore, or a DFU-induced restart, the Notecard will not enter a penalty box.\n\nThe length of time the Notecard is in the penalty box is 1/2 of the outbound sync interval or 120 minutes (whichever is greater). For each subsequent failure during modem registration, the penalty box interval grows by 120 minutes, up to a maximum of three days.\n\nThe Notecard will be released from the penalty box upon a successful registration on a cellular network, or if the host issues any of the following:\n\nA hub.sync request with the allow:true parameter.\nA card.wireless.penalty request with the stop:true parameter.\nA hub.log request with the sync:true parameter.\nAny change sent in a hub.set request.\nNetwork Registration Failure\n\nIf the cellular modem on the Notecard cannot register with a network within 120 seconds (or within 15 minutes if using NB-IoT), the Notecard will enter a network registration penalty box.\n\nThe length of time the Notecard is in", "start_char_idx": 1609, "end_char_idx": 3289, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "2a2bd476-0da7-4159-9381-906870c9941e": {"__data__": {"id_": "2a2bd476-0da7-4159-9381-906870c9941e", "embedding": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "c9b4ff9e4391075477d3a9d2eae905310f68d11c4296ac7d6ac70dbd8b5e17ec"}, "2": {"node_id": "57e2324c-65f1-4968-ba57-daf99c64d2a7", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "84e450d9975bf458462474db28faeb44a7818a2106bb5a8f4578c8b50de69e62"}, "3": {"node_id": "0e1ee83e-159c-4b25-b5ca-d75f82ecf41d", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "f3f13c23b0ce0c9f567c195eda4b2a86b947d27b16900ac181075aa7e0aee723"}}, "hash": "e777843e817fa7b2507490bff16a47d3f36d2949eeb73cf4b9be4b7714aad5d4", "text": "a network registration penalty box.\n\nThe length of time the Notecard is in the penalty box is extended by each subsequent network registration failure, by a minimum of 15 minutes. For each failure the previous delay is multiplied by 1.25 + 15 minutes, up to a maximum of 3 days. For example, the first set of retry intervals (in minutes) are: 15, 34, 58, 86, 123, 169, 227, and 298.\n\nThe Notecard will be released from the penalty box upon a successful registration on a cellular network, or if the host issues any of the following:\n\nA hub.sync request with the allow:true parameter.\nA card.wireless.penalty request with the stop:true parameter.\nA hub.log request with the sync:true parameter.\nAny change sent in a hub.set request.\nOverriding Network Registration Penalty Box Settings\nWarning\n\nThe misuse of this feature may result in the cellular carrier preventing the Notecard from future connections because it's effectively \"spamming\" the network. The cellular carrier may blacklist devices that it thinks are attempting to connect too frequently.\n\nThe default settings that determine the duration of the Network Registration Penalty Box are calculated based on the number of consecutive registration failures and can be overridden at runtime by using the card.wireless.penalty API:\n\nCOPY\n{\n   \"req\":  \"card.wireless.penalty\",\n   \"set\":  true,\n   \"rate\": <PenaltyMultiplierRate(float)>,\n   \"add\":  <PenaltyAddMins>,\n   \"max\":  <PenaltyMaxMins>,\n   \"min\":  <PenaltyMinMins>\n}\nNote\n\nIf overriding the default settings with this API request, all of the above fields MUST be specified.\n\nWhen using this API request, the", "start_char_idx": 3280, "end_char_idx": 4900, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "0e1ee83e-159c-4b25-b5ca-d75f82ecf41d": {"__data__": {"id_": "0e1ee83e-159c-4b25-b5ca-d75f82ecf41d", "embedding": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "c9b4ff9e4391075477d3a9d2eae905310f68d11c4296ac7d6ac70dbd8b5e17ec"}, "2": {"node_id": "2a2bd476-0da7-4159-9381-906870c9941e", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "e777843e817fa7b2507490bff16a47d3f36d2949eeb73cf4b9be4b7714aad5d4"}, "3": {"node_id": "925660a3-392e-4154-8028-c549402a16fc", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "b05b243b2edef32d93e2f3d22b3c188ce41ed330c29edbf63726b9aceb3b41c8"}}, "hash": "f3f13c23b0ce0c9f567c195eda4b2a86b947d27b16900ac181075aa7e0aee723", "text": "all of the above fields MUST be specified.\n\nWhen using this API request, the first retry interval is PenaltyMinMins. For each successive failure, the prior delay is multiplied by PenaltyMultiplierRate plus another PenaltyAddMins is added, up to a maximum of PenaltyMaxMins.\n\nFor example, by sending the following request, the retry intervals would be 5, 20, 50, 110, 230, 470, and 720 minutes:\n\nCOPY\n{\"req\":\"card.wireless.penalty\",\"set\":true,\"rate\":2.0,\"add\":10,\"max\":720,\"min\":5}\n\nLikewise, the default settings for a Network Registration Penalty Box can be also overridden with the environment variable _wireless_penalty:\n\nCOPY\n_wireless_penalty = <PenaltyMultiplierRate(float)>,<PenaltyAddMins>,<PenaltyMinMins>,<PenaltyMaxMins>\nInability to Connect to Notehub\n\nIf the cellular modem can successfully register with the network, but is unable to connect to Notehub, the Notecard may be placed in a \"Notehub connection failure\" penalty box.\n\nThe Notecard will enter this penalty box if connection failures to Notehub happen more than 3 consecutive times (if the Notecard is battery-powered) or 6 consecutive times (if the Notecard is USB/line-powered). The Notecard will remain in the penalty box for 1/2 of the configured outbound sync interval or 60 minutes, whichever is greater. Note that this penalty box will only come into play if there are no other network registration or power-related errors.\n\nThe Notecard will be released from the penalty box upon a successful connection to Notehub, or if the host issues any of the following:\n\nA hub.sync request with the allow:true parameter.\nA card.wireless.penalty request with", "start_char_idx": 4900, "end_char_idx": 6528, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}, "925660a3-392e-4154-8028-c549402a16fc": {"__data__": {"id_": "925660a3-392e-4154-8028-c549402a16fc", "embedding": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fb9abc03-b2dd-48e1-87de-313b4d7221ba", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "c9b4ff9e4391075477d3a9d2eae905310f68d11c4296ac7d6ac70dbd8b5e17ec"}, "2": {"node_id": "0e1ee83e-159c-4b25-b5ca-d75f82ecf41d", "node_type": null, "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}, "hash": "f3f13c23b0ce0c9f567c195eda4b2a86b947d27b16900ac181075aa7e0aee723"}}, "hash": "b05b243b2edef32d93e2f3d22b3c188ce41ed330c29edbf63726b9aceb3b41c8", "text": "request with the allow:true parameter.\nA card.wireless.penalty request with the stop:true parameter.\nA hub.log request with the sync:true parameter.\nAny change sent in a hub.set request.\nInability to Acquire GPS Satellite Fix\n\nIf the Notecard is configured to acquire its location via GNSS (GPS) but is unable to make a position fix, it may be placed in a penalty box (provided all of the following conditions are met):\n\nThe device is in motion (as determined by the on-board accelerometer).\nAt least one GPS satellite is visible.\nA GPS position fix is NOT made within 15 minutes.\nNote\n\nIf the GPS is not able to track any satellites at all, it is powered off after 90 seconds of searching and not placed in a penalty box (or it will be removed from the penalty box if it was already in one).\n\nThe length of time the Notecard is in the penalty box is 30 minutes multiplied by the number of consecutive GPS position fix failures (up to a maximum of 12 hours). This maximum duration of 12 hours would be reached after approximately 5 days of continuous GPS position fix failures.\n\nThe Notecard will be released from the penalty box if either:\n\nThe GPS makes a valid position fix.\nThe GPS is unable to track any satellites for 90 seconds.\nAdditional Resources\nCapture Trace Logs\ncard.wireless.penalty API\nNotecard Error and Status Codes\nCan we improve this page? Send us feedback", "start_char_idx": 6517, "end_char_idx": 7893, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n"}, "__type__": "1"}}, "docstore/ref_doc_info": {"fb9abc03-b2dd-48e1-87de-313b4d7221ba": {"node_ids": ["bf1d6e89-b321-4c55-8a80-0dac576d56cb", "57e2324c-65f1-4968-ba57-daf99c64d2a7", "2a2bd476-0da7-4159-9381-906870c9941e", "0e1ee83e-159c-4b25-b5ca-d75f82ecf41d", "925660a3-392e-4154-8028-c549402a16fc"], "metadata": {"title": "", "category": "Understanding Notecard Penalty Boxes", "url": "https://dev.blues.io/guides-and-tutorials/notecard-guides/understanding-notecard-penalty-boxes/"}}}}